// Sample JSON data
var data = {
  "DANCE": [
    {
      title: "CLASSICAL DANCE (GROUP)",
      description: "Description 1",
      imageSrc: "banner/classicalgroupdance.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000
    },
    {
      title: "WESTERN DANCE (GROUP)",
      description: "Description 1",
      imageSrc: "banner/westerndance.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000
    },
    {
      title: "FOLK DANCE (GROUP)",
      description: "Description 1",
      imageSrc: "banner/folkgroup.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000
    },
    {
      title: "STREET DANCE FACE-OFF",
      description: "Description 1",
      imageSrc: "banner/westernstreetdance.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "CLASSICAL DANCE (SOLO)",
      description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Maecenas volutpat blandit aliquam etiam erat velit scelerisque in dictum. Purus sit amet volutpat consequat mauris nunc congue nisi. Dolor morbi non arcu risus quis varius quam quisque. Aenean pharetra magna ac placerat. Sit amet luctus venenatis lectus magna fringilla urna. Vestibulum rhoncus est pellentesque elit ullamcorper dignissim. Ipsum suspendisse ultrices gravida dictum fusce ut placerat orci. Metus aliquam eleifend mi in nulla. Eget velit aliquet sagittis id consectetur purus ut. Faucibus turpis in eu mi bibendum neque egestas congue quisque. Metus aliquam eleifend mi in nulla posuere. Praesent tristique magna sit amet purus. Vel facilisis volutpat est velit egestas. Venenatis cras sed felis eget velit aliquet. Habitant morbi tristique senectus et.",
      imageSrc: "banner/ClassicalSolo.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },  
  ],
  "MUSIC": [
    {
      title: "BATTLE OF BANDS",
      description: "Description 1",
      imageSrc: "banner/battleofbands.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000
    },
    {
      title: "CLASSICAL SINGING (SOLO)",
      description: "Description 1",
      imageSrc: "banner/classicalsolosinging.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "WESTERN SINGING (SOLO)",
      description: "Description 1",
      imageSrc: "banner/beatboxing.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "BEAT BOXING",
      description: "Description 1",
      imageSrc: "banner/westernsolo.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
  ],
  "MEDIA": [
    {
      title: "SHORT FILM",
      description: "Description 1",
      imageSrc: "banner/ShortFilm.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000
    },
    {
      title: "PHOTOGRAPHY",
      description: "Description 1",
      imageSrc: "banner/photography.png",
      badgeText: [3, "5000", "3000"],
      regfee : 300
    },
    {
      title: "REELS",
      description: "Description 1",
      imageSrc: "banner/reel.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
  ],
  "FASHION": [
      {
        title: "FASHION SHOW",
        description: "Description 1",
        imageSrc: "banner/fashionshow.png",
        badgeText: [5, "10000", "5000"],
        regfee : 1000
      }
  ],
  "SPORTS": [
    {
      title: "FOOTBALL",
      description: "Description 1",
      imageSrc: "banner/football.png",
      badgeText: [5,"10000", "5000"],
      regfee : 1000

    },
    {
      title: "KABBADI",
      description: "Description 1",
      imageSrc: "banner/kabbadi.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000

    },
  ],
  "TECHNICAL": [
    {
      title: "RC DRAG AND ENDURANCE",
      description: "Description 1",
      imageSrc: "banner/rcdragandendurance.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000

    },
    {
      title: "LINE FOLLOW ROBOT",
      description: "Description 1",
      imageSrc: "banner/linefollowrobot.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500

    },
    {
      title: "DRONE",
      description: "Description 1",
      imageSrc: "banner/drone.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    
    },
  ],
  "THEATER": [
    // {
    //   title: "MIME",
    //   description: "Description 1",
    //   imageSrc: "images/a-l-ya631mqQ7Ng-unsplash.jpg",
    //   badgeText: ["THEATRE", "5000", "3000"],
    // },
    {
      title: "SKIT",
      description: "Description 1",
      imageSrc: "banner/Theatre.png",
      badgeText: [5, "10000", "5000"],
      regfee : 1000
    },
    {
      title: "STREET PLAY",
      description: "Description 1",
      imageSrc: "banner/streetplay.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
  ],
  "MANAGEMENT": [
    {
      title: "TREASURE HUNT",
      description: "Description 1",
      imageSrc: "banner/treasurehunt.png",
      badgeText: [4, "5000"],
      regfee : 500
    },
    {
      title: "BEST MANAGEMENT",
      description: "Description 1",
      imageSrc: "banner/bestmanagement.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "BEST MANAGER",
      description: "Description 1",
      imageSrc: "banner/bestmanager.png",
      badgeText: [4, "5000"],
      regfee : 500
    },
    {
      title: "MARKETING",
      description: "Description 1",
      imageSrc: "banner/marketing.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "BEST ENTREPRENEUR",
      description: "Description 1",
      imageSrc: "banner/entrepreneur.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "OPERATIONS",
      description: "Description 1",
      imageSrc: "banner/operations.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
    {
      title: "AD REELS",
      description: "Description 1",
      imageSrc: "banner/AdReels.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
    // {
    //   title: "MAD ADS",
    //   description: "Description 1",
    //   imageSrc: "/images/madads.png",
    //   badgeText: [4, "15000", "10000"],
    // },
    {
      title: "HR",
      description: "Description 1",
      imageSrc: "banner/HR.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
    {
      title: "FINANCE",
      description: "Description 1",
      imageSrc: "banner/finance.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
  ],
  "VISUAL ARTS": [
    {
      title: "APPAREL PAINTING",
      description: "Description 1",
      imageSrc: "banner/apparelpainting.png",
      badgeText: [4, "5000", "3000"],
      regfee : 500
    },
    {
      title: "ILLUSTRATION",
      description: "Description 1",
      imageSrc: "banner/illustration.png",
      badgeText: [3, "5000", "3000"],
      regfee : 300
    },
    {
      title: "CLAY MODELING",
      description: "Description 1",
      imageSrc: "banner/claymodelling.png",
      badgeText: [3, "5000", "3000"],
      regfee : 300
    },
    {
      title: "FACE PAINTING",
      description: "Description 1",
      imageSrc: "banner/FacePainting.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
  ],
  "LITERATURE": [
    {
      title: "POETRY",
      description: "Description 1",
      imageSrc: "banner/poetry.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
    {
      title: "DEBATE",
      description: "Description 1",
      imageSrc: "banner/debate.png",
      badgeText: [3, "3000", "1000"],
      regfee : 300
    },
  ]


};


// Generate categories
const categoryBody = document.getElementById("bodytag");

const categorySection = document.createElement("div");
categorySection.classList.add("sectiontag");


const outerWrapper = document.createElement("div");
outerWrapper.classList.add("outer-wrapper");

const innerWrapper = document.createElement("div");
innerWrapper.classList.add("inner-wrapper");

// category.classList.add("");
window.onload = function() {
  head.innerText= "ALL Events"
  loadCards("DANCE");
};
var categories = Object.keys(data);
for (var i = 0; i < categories.length; i++) {
    const category = document.createElement("button");
    category.className = "category underline pseudo-item pop";
    // category.classList.add=""
    category.innerText = categories[i];
    category.onclick = function () {
        loadCards(this.innerText);
    };
    innerWrapper.appendChild(category);
}


const line = document.createElement("div");
line.classList.add("pseduo-track");


categoryBody.appendChild(categorySection);
categorySection.appendChild(outerWrapper);
categorySection.appendChild(line);


outerWrapper.appendChild(innerWrapper);

// Load cards for selected category
function loadCards(category) {
  var cardData = data[category];
  var cardsDiv = document.getElementById("cards");
  cardsDiv.innerHTML = "";
  for (var i = 0; i < cardData.length; i++) {

    const cards = document.createElement("div");
    cards.classList.add("card");

    const cardImgContainer = document.createElement("div");
    cardImgContainer.classList.add("card-img-container");

    const cardImgDiv = document.createElement("div");
    cardImgDiv.classList.add("card-img");

    const cardImg = document.createElement("img");
    cardImg.src = cardData[i].imageSrc;
    cardImg.classList.add("card-img");

    cardImgDiv.appendChild(cardImg);
    cardImgContainer.appendChild(cardImgDiv);

    const cardBadges = document.createElement("div");
    cardBadges.classList.add("card-badges");

    // console.log(cardData[0].badgeText[0]);

    cardData[i].badgeText.map((item,index) => {
      const badge = document.createElement("div");
      badge.classList.add("badge");
      if(typeof(item)==="string"){
        
          if (index==1) {
    
            const icon = document.createElement("span");
            icon.innerText = `🥇`;
            icon.classList.add("iconfirst")
            badge.appendChild(icon);

            const rate = document.createElement("span");
            rate.innerText = `₹${item}`;
            rate.classList.add("ratefirst")
            badge.appendChild(rate);


          } else if(index==2) {
     
            const icon = document.createElement("span");
            icon.innerText = `🥈`;
            icon.classList.add("iconfirst")
            badge.appendChild(icon);

            const rate = document.createElement("span");
            rate.innerText = `₹${item}`;
            badge.appendChild(rate);

          }
        
        // badge.textContent = item;


      }else{

       const staricon = document.createElement("span")
       staricon.classList.add("material-symbols-outlined")
       staricon.innerText="magic_button"

       badge.appendChild(staricon);
        
       const rate = document.createElement("p");
       rate.innerText = item;
       badge.appendChild(rate);
        
      }

      cardBadges.appendChild(badge);
    });


    cardImgContainer.appendChild(cardBadges);

    const cardInfo = document.createElement("div");
    cardInfo.classList.add("card-info");

    const cardTitle = document.createElement("h4");
    cardTitle.classList.add("card-title");
    cardTitle.innerText = cardData[i].title;

    cardInfo.appendChild(cardTitle);

    cardregistrationfee = document.createElement("h6")
    cardregistrationfee.innerText=`Registration Fees 💰: ₹${cardData[i].regfee}`;
    cardregistrationfee.classList="regfees";

    const cardDesc = document.createElement("div");
    cardDesc.classList.add("card-desc");


   
    cardDesc.innerHTML = cardData[i].description;

    cardInfo.appendChild(cardregistrationfee);

    // cardInfo.appendChild(cardDesc);




  
    cards.appendChild(cardImgContainer);
    cards.appendChild(cardInfo);


    cardsDiv.appendChild(cards);
  }


  // cardsDiv.addEventListener("click", (event) => {
  //   const eventdesc = event.target.closest(".card");
  //   // console.log(event)

  //   if (eventdesc) {
  //     event.stopPropagation();
  //     const cardIndex = [...cardsDiv.children].indexOf(eventdesc);
  //     console.log(cardIndex);
  //     console.log(cardData[cardIndex]);
  //     showPopup(cardData[cardIndex]);

  //   }
  // });

  // cardsDiv.removeEventListener("click",(event) => {
  //   const eventdesc = event.target.closest(".card");
  //   console.log(eventdesc)
  //   // console.log(event)

  //   if (eventdesc) {
  //     event.stopPropagation();
  //     const cardIndex = [...cardsDiv.children].indexOf(eventdesc);
  //     console.log(cardIndex);
  //     console.log(cardData[cardIndex]);
  //     showPopup(cardData[cardIndex]);

  //   }
  // });
}



function showPopup(cardData) {
  const existingPopup = document.querySelector(".popup");
  if (existingPopup) {
    // if a popup element already exists, remove it
    existingPopup.remove();
  }

  const popup = document.createElement("div");
  popup.classList.add("popup");

  const closeBtnDiv = document.createElement("div");
  closeBtnDiv.classList.add("close-btn-div");

  const CloseBtn = document.createElement("button");
  CloseBtn.classList.add("close");
  CloseBtn.innerHTML = "X";

  closeBtnDiv.appendChild(CloseBtn);

  popup.appendChild(closeBtnDiv);

  const popupContent = document.createElement("div");
  popupContent.classList.add("popup-content");

  const popupTitle = document.createElement("h3");
  popupTitle.innerHTML = cardData.title;

  const popupDesc = document.createElement("p");
  popupDesc.innerHTML = cardData.desc;

  popup.appendChild(popupTitle);
  popup.appendChild(popupDesc);
  popup.appendChild(popupContent);

  CloseBtn.addEventListener("click", () => {
    // close the popup when the close button is clicked
    popup.remove();
  });

  document.body.appendChild(popup);

}